!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);const n="object"==typeof HTMLElement;function s(e){return n?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function o(e,t){t.forEach(function(t){e.classList.add(t)})}function h(e,t){t.forEach(function(t){e.classList.remove(t)})}const l=".drift-bounding-box,.drift-zoom-pane{position:absolute;pointer-events:none}@keyframes noop{0%{zoom:1}}@-webkit-keyframes noop{0%{zoom:1}}.drift-zoom-pane.drift-open{display:block}.drift-zoom-pane.drift-closing,.drift-zoom-pane.drift-opening{animation:noop 1ms;-webkit-animation:noop 1ms}.drift-zoom-pane{overflow:hidden;width:100%;height:100%;top:0;left:0}.drift-zoom-pane-loader{display:none}.drift-zoom-pane img{position:absolute;display:block;max-width:none;max-height:none}";function a(){throw new Error("Missing parameter")}class r{constructor(e){this.isShowing=!1;let{namespace:t=null,zoomFactor:i=a(),containerEl:n=a()}=e;this.settings={namespace:t,zoomFactor:i,containerEl:n},this.openClasses=this._buildClasses("open"),this._buildElement()}_buildClasses(e){let t=[`drift-${e}`],i=this.settings.namespace;return i&&t.push(`${i}-${e}`),t}_buildElement(){this.el=document.createElement("div"),o(this.el,this._buildClasses("bounding-box"))}show(e,t){this.isShowing=!0,this.settings.containerEl.appendChild(this.el);let i=this.el.style;i.width=`${Math.round(e/this.settings.zoomFactor)}px`,i.height=`${Math.round(t/this.settings.zoomFactor)}px`,o(this.el,this.openClasses)}hide(){this.isShowing&&this.settings.containerEl.removeChild(this.el),this.isShowing=!1,h(this.el,this.openClasses)}setPosition(e,t,i){let n=window.pageXOffset,s=window.pageYOffset,o=i.left+e*i.width-this.el.clientWidth/2+n,h=i.top+t*i.height-this.el.clientHeight/2+s;this.el.getBoundingClientRect();o<i.left+n?o=i.left+n:o+this.el.clientWidth>i.left+i.width+n&&(o=i.left+i.width-this.el.clientWidth+n),h<i.top+s?h=i.top+s:h+this.el.clientHeight>i.top+i.height+s&&(h=i.top+i.height-this.el.clientHeight+s),this.el.style.left=`${o}px`,this.el.style.top=`${h}px`}}class d{constructor(e={}){this._show=this._show.bind(this),this._hide=this._hide.bind(this),this._handleEntry=this._handleEntry.bind(this),this._handleMovement=this._handleMovement.bind(this);let{el:t=a(),zoomPane:i=a(),sourceAttribute:n=a(),handleTouch:s=a(),onShow:o=null,onHide:h=null,hoverDelay:l=0,touchDelay:d=0,hoverBoundingBox:c=a(),touchBoundingBox:g=a(),namespace:m=null,zoomFactor:u=a(),boundingBoxContainer:p=a()}=e;this.settings={el:t,zoomPane:i,sourceAttribute:n,handleTouch:s,onShow:o,onHide:h,hoverDelay:l,touchDelay:d,hoverBoundingBox:c,touchBoundingBox:g,namespace:m,zoomFactor:u,boundingBoxContainer:p},(this.settings.hoverBoundingBox||this.settings.touchBoundingBox)&&(this.boundingBox=new r({namespace:this.settings.namespace,zoomFactor:this.settings.zoomFactor,containerEl:this.settings.boundingBoxContainer})),this.enabled=!0,this._bindEvents()}get isShowing(){return this.settings.zoomPane.isShowing}_bindEvents(){this.settings.el.addEventListener("mouseenter",this._handleEntry,!1),this.settings.el.addEventListener("mouseleave",this._hide,!1),this.settings.el.addEventListener("mousemove",this._handleMovement,!1),this.settings.handleTouch&&(this.settings.el.addEventListener("touchstart",this._handleEntry,!1),this.settings.el.addEventListener("touchend",this._hide,!1),this.settings.el.addEventListener("touchmove",this._handleMovement,!1))}_unbindEvents(){this.settings.el.removeEventListener("mouseenter",this._handleEntry,!1),this.settings.el.removeEventListener("mouseleave",this._hide,!1),this.settings.el.removeEventListener("mousemove",this._handleMovement,!1),this.settings.handleTouch&&(this.settings.el.removeEventListener("touchstart",this._handleEntry,!1),this.settings.el.removeEventListener("touchend",this._hide,!1),this.settings.el.removeEventListener("touchmove",this._handleMovement,!1))}_handleEntry(e){e.preventDefault(),this._lastMovement=e,"mouseenter"==e.type&&this.settings.hoverDelay?this.entryTimeout=setTimeout(this._show,this.settings.hoverDelay):this.settings.touchDelay?this.entryTimeout=setTimeout(this._show,this.settings.touchDelay):this._show()}_show(){if(!this.enabled)return;let e=this.settings.onShow;if(e&&"function"==typeof e&&e(),this.settings.zoomPane.show(this.settings.el.getAttribute(this.settings.sourceAttribute),this.settings.el.clientWidth,this.settings.el.clientHeight),this._lastMovement){let e=this._lastMovement.touches;(e&&this.settings.touchBoundingBox||!e&&this.settings.hoverBoundingBox)&&this.boundingBox.show(this.settings.zoomPane.el.clientWidth,this.settings.zoomPane.el.clientHeight)}this._handleMovement()}_hide(e){e.preventDefault(),this._lastMovement=null,this.entryTimeout&&clearTimeout(this.entryTimeout),this.boundingBox&&this.boundingBox.hide();let t=this.settings.onHide;t&&"function"==typeof t&&t(),this.settings.zoomPane.hide()}_handleMovement(e){if(e)e.preventDefault(),this._lastMovement=e;else{if(!this._lastMovement)return;e=this._lastMovement}let t,i;if(e.touches){let n=e.touches[0];t=n.clientX,i=n.clientY}else t=e.clientX,i=e.clientY;let n=this.settings.el.getBoundingClientRect(),s=t-n.left,o=i-n.top,h=s/this.settings.el.clientWidth,l=o/this.settings.el.clientHeight;this.boundingBox&&this.boundingBox.setPosition(h,l,n),this.settings.zoomPane.setPosition(h,l,n)}}var c=document.createElement("div").style;const g="undefined"!=typeof document&&("animation"in c||"webkitAnimation"in c);class m{constructor(e={}){this._completeShow=this._completeShow.bind(this),this._completeHide=this._completeHide.bind(this),this._handleLoad=this._handleLoad.bind(this),this.isShowing=!1;let{container:t=null,zoomFactor:i=a(),inline:n=a(),namespace:s=null,showWhitespaceAtEdges:o=a(),containInline:h=a(),inlineOffsetX:l=0,inlineOffsetY:r=0,inlineContainer:d=document.body}=e;this.settings={container:t,zoomFactor:i,inline:n,namespace:s,showWhitespaceAtEdges:o,containInline:h,inlineOffsetX:l,inlineOffsetY:r,inlineContainer:d},this.openClasses=this._buildClasses("open"),this.openingClasses=this._buildClasses("opening"),this.closingClasses=this._buildClasses("closing"),this.inlineClasses=this._buildClasses("inline"),this.loadingClasses=this._buildClasses("loading"),this._buildElement()}_buildClasses(e){let t=[`drift-${e}`],i=this.settings.namespace;return i&&t.push(`${i}-${e}`),t}_buildElement(){this.el=document.createElement("div"),o(this.el,this._buildClasses("zoom-pane"));let e=document.createElement("div");o(e,this._buildClasses("zoom-pane-loader")),this.el.appendChild(e),this.imgEl=document.createElement("img"),this.el.appendChild(this.imgEl)}_setImageURL(e){this.imgEl.setAttribute("src",e)}_setImageSize(e,t){this.imgEl.style.width=`${e*this.settings.zoomFactor}px`,this.imgEl.style.height=`${t*this.settings.zoomFactor}px`}setPosition(e,t,i){const{width:n,height:s}=this.imgEl.getBoundingClientRect(),{width:o,height:h}=this.el.getBoundingClientRect();let l=o/2-n*e,a=h/2-s*t;const r=o-n,d=h-s,c=r>0,g=d>0,m=c?r/2:0,u=g?d/2:0,p=c?r/2:r,f=g?d/2:d;if(this.el.parentElement===this.settings.inlineContainer){let n=window.pageXOffset,s=window.pageYOffset,l=i.left+e*i.width-o/2+this.settings.inlineOffsetX+n,a=i.top+t*i.height-h/2+this.settings.inlineOffsetY+s;this.settings.containInline&&(l<i.left+n?l=i.left+n:l+o>i.left+i.width+n&&(l=i.left+i.width-o+n),a<i.top+s?a=i.top+s:a+h>i.top+i.height+s&&(a=i.top+i.height-h+s)),this.el.style.left=`${l}px`,this.el.style.top=`${a}px`}this.settings.showWhitespaceAtEdges||(l>m?l=m:l<p&&(l=p),a>u?a=u:a<f&&(a=f)),this.imgEl.style.transform=`translate(${l}px, ${a}px)`,this.imgEl.style.webkitTransform=`translate(${l}px, ${a}px)`}get _isInline(){let e=this.settings.inline;return!0===e||"number"==typeof e&&window.innerWidth<=e}_removeListenersAndResetClasses(){this.el.removeEventListener("animationend",this._completeShow,!1),this.el.removeEventListener("animationend",this._completeHide,!1),this.el.removeEventListener("webkitAnimationEnd",this._completeShow,!1),this.el.removeEventListener("webkitAnimationEnd",this._completeHide,!1),h(this.el,this.openClasses),h(this.el,this.closingClasses)}show(e,t,i){this._removeListenersAndResetClasses(),this.isShowing=!0,o(this.el,this.openClasses),o(this.el,this.loadingClasses),this.imgEl.addEventListener("load",this._handleLoad,!1),this._setImageURL(e),this._setImageSize(t,i),this._isInline?this._showInline():this._showInContainer(),g&&(this.el.addEventListener("animationend",this._completeShow,!1),this.el.addEventListener("webkitAnimationEnd",this._completeShow,!1),o(this.el,this.openingClasses))}_showInline(){this.settings.inlineContainer.appendChild(this.el),o(this.el,this.inlineClasses)}_showInContainer(){this.settings.container.appendChild(this.el)}hide(){this._removeListenersAndResetClasses(),this.isShowing=!1,g?(this.el.addEventListener("animationend",this._completeHide,!1),this.el.addEventListener("webkitAnimationEnd",this._completeHide,!1),o(this.el,this.closingClasses)):(h(this.el,this.openClasses),h(this.el,this.inlineClasses))}_completeShow(){this.el.removeEventListener("animationend",this._completeShow,!1),this.el.removeEventListener("webkitAnimationEnd",this._completeShow,!1),h(this.el,this.openingClasses)}_completeHide(){this.el.removeEventListener("animationend",this._completeHide,!1),this.el.removeEventListener("webkitAnimationEnd",this._completeHide,!1),h(this.el,this.openClasses),h(this.el,this.closingClasses),h(this.el,this.inlineClasses),this.el.setAttribute("style",""),this.el.parentElement===this.settings.container?this.settings.container.removeChild(this.el):this.el.parentElement===this.settings.inlineContainer&&this.settings.inlineContainer.removeChild(this.el)}_handleLoad(){this.imgEl.removeEventListener("load",this._handleLoad,!1),h(this.el,this.loadingClasses)}}window.Drift=class{constructor(e,t={}){if(this.VERSION="1.3.0",this.triggerEl=e,this.destroy=this.destroy.bind(this),!s(this.triggerEl))throw new TypeError("`new Drift` requires a DOM element as its first argument.");const i=t.namespace||null,n=t.showWhitespaceAtEdges||!1,o=t.containInline||!1,h=t.inlineOffsetX||0,a=t.inlineOffsetY||0,r=t.inlineContainer||document.body,d=t.sourceAttribute||"data-zoom",c=t.zoomFactor||3,g=void 0===t.paneContainer?document.body:t.paneContainer,m=t.inlinePane||375,u=t.handleTouch||!0,p=t.onShow||null,f=t.onHide||null,v=t.injectBaseStyles||!0,b=t.hoverDelay||0,_=t.touchDelay||0,w=t.hoverBoundingBox||!1,E=t.touchBoundingBox||!1,y=t.boundingBoxContainer||document.body;if(!0!==m&&!s(g))throw new TypeError("`paneContainer` must be a DOM element when `inlinePane !== true`");if(!s(r))throw new TypeError("`inlineContainer` must be a DOM element");this.settings={namespace:i,showWhitespaceAtEdges:n,containInline:o,inlineOffsetX:h,inlineOffsetY:a,inlineContainer:r,sourceAttribute:d,zoomFactor:c,paneContainer:g,inlinePane:m,handleTouch:u,onShow:p,onHide:f,injectBaseStyles:v,hoverDelay:b,touchDelay:_,hoverBoundingBox:w,touchBoundingBox:E,boundingBoxContainer:y},this.settings.injectBaseStyles&&function(){if(document.querySelector(".drift-base-styles"))return;let e=document.createElement("style");e.type="text/css",e.classList.add("drift-base-styles"),e.appendChild(document.createTextNode(l));let t=document.head;t.insertBefore(e,t.firstChild)}(),this._buildZoomPane(),this._buildTrigger()}get isShowing(){return this.zoomPane.isShowing}get zoomFactor(){return this.settings.zoomFactor}set zoomFactor(e){this.settings.zoomFactor=e,this.zoomPane.settings.zoomFactor=e,this.trigger.settings.zoomFactor=e,this.boundingBox.settings.zoomFactor=e}_buildZoomPane(){this.zoomPane=new m({container:this.settings.paneContainer,zoomFactor:this.settings.zoomFactor,showWhitespaceAtEdges:this.settings.showWhitespaceAtEdges,containInline:this.settings.containInline,inline:this.settings.inlinePane,namespace:this.settings.namespace,inlineOffsetX:this.settings.inlineOffsetX,inlineOffsetY:this.settings.inlineOffsetY,inlineContainer:this.settings.inlineContainer})}_buildTrigger(){this.trigger=new d({el:this.triggerEl,zoomPane:this.zoomPane,handleTouch:this.settings.handleTouch,onShow:this.settings.onShow,onHide:this.settings.onHide,sourceAttribute:this.settings.sourceAttribute,hoverDelay:this.settings.hoverDelay,touchDelay:this.settings.touchDelay,hoverBoundingBox:this.settings.hoverBoundingBox,touchBoundingBox:this.settings.touchBoundingBox,namespace:this.settings.namespace,zoomFactor:this.settings.zoomFactor,boundingBoxContainer:this.settings.boundingBoxContainer})}setZoomImageURL(e){this.zoomPane._setImageURL(e)}disable(){this.trigger.enabled=!1}enable(){this.trigger.enabled=!0}destroy(){this.trigger._unbindEvents()}}}]);
//# sourceMappingURL=Drift.min.js.map